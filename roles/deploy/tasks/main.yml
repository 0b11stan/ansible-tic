- name: required packages are installed
  become: true
  package:
    state: present
    name: git

- name: pull tic docker
  become: true
  git:
    repo: https://github.com/0b11stan/docker-tic.git
    dest: /srv/docker-tic/
    key_file: /root/.ssh/id_rsa

- name: deploy apps
  become: true
  docker_compose:
    project_name: tic
    project_src: /srv/docker-tic/
    build: true
    nocache: true

# TODO : auto-configure nextcloud overwrite config !
#   'overwritehost' => 'cloud.tic.sh',
#   'overwriteprotocol' => 'https',
#   'overwrite.cli.url' => 'https://cloud.tic.sh/',
